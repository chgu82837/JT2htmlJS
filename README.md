JT2htmlJS
=========

Json + Template => HTML By Javascript
Generate HTML from JSON and Template by Javascript. By default,there is a JSON resolver to get the google sheet data as source to generate HTML.

Usage
===

### JSON solver (source JSON type): Google sheet
For now, I make only one for google sheet JSON. And this is how to use...
 1. add the following line to html file
  
  ```
  <script src="path/to/jt2html.js"></script>
  ```

 2. use jquery.ajax or some way to get the google sheet json data and call JT2html function as following, here use jquery as example:
  ```
  $.ajax({
    url:"https://spreadsheets.google.com/feeds/list/1huBErviY2ehb7duwyI5mOzc9y3Ia5yBFQTvPaTyVfFM/od6/public/values?alt=json",
    success:function(data){
    
      // display the data
      console.log(data);
      
      // simplest way to use,only give the sheet entry of json
      JT2html(data.feed.entry);
    }
  });
  ```

 3. JT2html function has at most 5 parameters, the following is how they can be used. (also default setting which does the same thing as `Req();` )
  ```
  JT2html(
    
    // 1st parameter is the entry array in google sheet json (json.feed.entry)
    data.feed.entry,
    
    // 2nd parameter is a callback the generation is complete,its first parameter will receive the generated HTML
    // You can specify where to paste these HTML and return true and JT2htmlJS wont paste again (only when return true)
    function(){},

    // 3rd parameter is an object containing template for JT's T. The use of it will be introduce later in Template + JSON => HTML section.
    {
      body: "<nav class=\"navbar navbar-inverse navbar-fixed-top\" role=\"navigation\">\n    @{title}\n    <div class=\"collapse navbar-collapse\" id=\"bs-example-navbar-collapse-1\">\n        @{list}\n        @{link}\n    </div><!-- /.navbar-collapse -->\n</nav>",
      title: "<div id=\"@{id}\" class=\"navbar-header @{class}\">\n    <button type=\"button\" class=\"navbar-toggle\" data-toggle=\"collapse\" data-target=\"#bs-example-navbar-collapse-1\">\n        <span class=\"sr-only\">Toggle navigation</span>\n        <span class=\"icon-bar\"></span>\n        <span class=\"icon-bar\"></span>\n        <span class=\"icon-bar\"></span>\n    </button>\n\n    <div id=\"nav_title_bg\" class=\"hidden-xs\" style=\"height:50px\">\n        <a class=\"hidden-xs navbar-brand\" href=\"@{href}\" title=\"@{info}\">@{text}</a>\n    </div>\n    \n    \n    <a class=\"navbar-brand visible-xs\" href=\"@{href}\">@{text}</a>\n    <p class=\"navbar-text visible-xs\">@{info}</p>\n</div>\n\n",
      list: "<ul id=\"@{id}\" class=\"nav navbar-nav @{class}\">\n    <li class=\"dropdown\">\n        <a href=\"@{href}\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">@{text}<b class=\"caret\"></b></a>\n        <ul class=\"dropdown-menu\">\n            @{}\n        </ul>\n    </li>\n</ul>",
      link: "<ul id=\"@{id}\" class=\"nav navbar-nav @{class}\">\n    <li><a href=\"@{href}\" target=\"_blank\">@{text}</a></li>\n</ul>",
      "": "<li id=\"@{id}\" class=\"@{class}\"><a href=\"@{href}\">@{text}</a></li>"
    },
    
    // 4th parameter is config object
    {
      // JsonResolver is a function that translate an element into valid element, this will be introduce later in Template + JSON => HTML section.
      // this example is generated by livescript...
      JsonResolver: function(aData){
        var i, v, results$ = {};
        for (i in aData) {
          v = aData[i];
          if (i.substr(0, 4) === "gsx$") {
            results$[i.replace("gsx$", "")] = v['$t'];
          }
        }
        return results$;
      },

      // info is a boolean, true then enable all debug message
      info: false,

      // root type name, this will be introduce later in Template + JSON => HTML section.
      root: 'body',

      // defaultValue for a variable, this will be introduce later in Template + JSON => HTML section.
      defaultValue: {
        href: '#'
      }
    },

    // 5th parameter is a boolean, true then only return the instance without generate HTML, call instance.fire() by yourself
    false
  );
  ```

Template + JSON => HTML
===

The fire function (main function) will call genHTML function shown below, and try to give the complete callback
If no complete callback or not returning true, fire function will append the HTML to top of the body
The fire function is called when JT2html(); is called by default.

 * genHTML function:
![genHTML function](https://raw.github.com/chgu82837/JT2htmlJS/master/_readmeImg/jt2html_genHTML.png)

 * genContext function:
![genContext function](https://raw.github.com/chgu82837/JT2htmlJS/master/_readmeImg/jt2html_genContext.png)

Using Livescript
===
This js is scripted by Livescript and js file is the compiled result.
check the _src folder and true source file is there
